<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DECTERUM</title>
    <meta name="theme-color" content="#000000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <div class="app">
        <!-- Header -->
        <div class="app-header">
            <div class="app-title">DECTERUM</div>
            <div class="connection-status">
                <div class="status-dot" id="status-dot"></div>
                <span id="status-text">Connecting</span>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Chat Section -->
            <div class="section active" id="chat-section">
                <div class="chat-section">
                    <!-- Contacts View -->
                    <div id="contacts-view">
                        <div class="section-header">
                            <div class="section-title">Messages</div>
                            <button class="btn btn-primary" onclick="showAddContactModal()">
                                Add Contact
                            </button>
                        </div>
                        <div class="contacts-list" id="contacts-list">
                            <div class="empty-state">
                                <div class="empty-state-icon">üí¨</div>
                                <h3>No conversations</h3>
                                <p>Add contacts to start messaging</p>
                            </div>
                        </div>
                    </div>

                    <!-- Chat Messages View -->
                    <div id="chat-view" class="hidden">
                        <div class="section-header">
                            <div style="display: flex; align-items: center; gap: var(--spacing-3);">
                                <button class="btn-icon" onclick="showContactsList()">‚Üê</button>
                                <span class="section-title" id="chat-contact-name">Chat</span>
                            </div>
                        </div>
                        <div class="chat-messages" id="messages-container">
                            <div class="empty-state">
                                <div class="empty-state-icon">üí¨</div>
                                <h3>Start a conversation</h3>
                                <p>Type a message to begin</p>
                            </div>
                        </div>
                        <div class="message-input-container">
                            <textarea 
                                class="message-input" 
                                id="message-input"
                                placeholder="Type a message..."
                                disabled
                                rows="1"
                            ></textarea>
                            <button class="send-btn" id="send-btn" onclick="sendMessage()" disabled>
                                ‚Üó
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Feed Section -->
            <div class="section" id="feed-section">
                <div class="coming-soon">
                    <div class="coming-soon-icon">üìñ</div>
                    <h2>Social Feed</h2>
                    <p>Coming soon: Decentralized posts, timeline, and social interactions</p>
                </div>
            </div>

            <!-- Videos Section -->
            <div class="section" id="videos-section">
                <div class="coming-soon">
                    <div class="coming-soon-icon">üé¨</div>
                    <h2>Videos</h2>
                    <p>Coming soon: Decentralized video sharing and streaming</p>
                </div>
            </div>

            <!-- Settings Section -->
            <div class="section" id="settings-section">
                <div class="settings-section">
                    <div class="settings-group">
                        <div class="settings-group-title">Profile</div>
                        <div class="settings-item">
                            <div class="settings-label">Username</div>
                            <div class="settings-value" id="user-username">‚Äî</div>
                        </div>
                        <div class="settings-item user-id-item">
                            <div class="settings-label">User ID</div>
                            <div class="settings-value-container">
                                <div class="settings-value" id="user-id" title="Click copy button to copy full ID">‚Äî</div>
                                <button class="btn-icon copy-btn" id="copy-user-id" onclick="copyUserId()" title="Copy User ID">
                                    üìã
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="settings-group">
                        <div class="settings-group-title">Network</div>
                        <div class="settings-item">
                            <div class="settings-label">Status</div>
                            <div class="settings-value" id="network-status">Offline</div>
                        </div>
                        <div class="settings-item">
                            <div class="settings-label">Connected Peers</div>
                            <div class="settings-value" id="peers-count">0</div>
                        </div>
                        <div class="settings-item">
                            <div class="settings-label">Local Port</div>
                            <div class="settings-value" id="local-port">‚Äî</div>
                        </div>
                    </div>

                    <div class="settings-group">
                        <div class="settings-group-title">External Access</div>
                        <div class="settings-item">
                            <div class="settings-label">Cloudflare Tunnel</div>
                            <div class="settings-value" id="tunnel-status">Disabled</div>
                        </div>
                        <div class="settings-item" id="tunnel-url-item" style="display: none;">
                            <div class="settings-label">External URL</div>
                            <div class="settings-value-container">
                                <div class="settings-value" id="tunnel-url">‚Äî</div>
                                <button class="btn-icon copy-btn" onclick="copyTunnelUrl()" title="Copy Tunnel URL">
                                    üìã
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="settings-group">
                        <div class="settings-group-title">Actions</div>
                        <div class="settings-item">
                            <button class="btn btn-ghost" onclick="discoverPeers()" style="width: 100%;">
                                Discover Network Nodes
                            </button>
                        </div>
                        <div class="settings-item">
                            <button class="btn btn-ghost" onclick="showEditProfileModal()" style="width: 100%;">
                                Edit Profile
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <div class="bottom-nav">
            <div class="nav-item active" onclick="switchSection('chat')">
                <div class="nav-icon">üí¨</div>
                <div class="nav-label">Chat</div>
            </div>
            <div class="nav-item" onclick="switchSection('feed')">
                <div class="nav-icon">üìñ</div>
                <div class="nav-label">Feed</div>
            </div>
            <div class="nav-item" onclick="switchSection('videos')">
                <div class="nav-icon">üé¨</div>
                <div class="nav-label">Videos</div>
            </div>
            <div class="nav-item" onclick="switchSection('settings')">
                <div class="nav-icon">‚öô</div>
                <div class="nav-label">Settings</div>
            </div>
        </div>
    </div>

    <!-- Add Contact Modal -->
    <div class="modal" id="add-contact-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Add Contact</div>
                <div class="modal-subtitle">Connect with other users on the network</div>
            </div>
            <form onsubmit="addContact(event)">
                <div class="form-group">
                    <label class="form-label">User ID</label>
                    <input type="text" class="form-input" id="contact-id" 
                           placeholder="paste-user-id-here" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Display Name</label>
                    <input type="text" class="form-input" id="contact-name" 
                           placeholder="What you want to call them" required>
                </div>
                <div class="button-actions">
                    <button type="button" class="btn btn-ghost" onclick="hideAddContactModal()">
                        Cancel
                    </button>
                    <button type="submit" class="btn btn-primary">
                        Add Contact
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Profile Modal -->
    <div class="modal" id="edit-profile-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Edit Profile</div>
                <div class="modal-subtitle">Update your information</div>
            </div>
            <form onsubmit="updateProfile(event)">
                <div class="form-group">
                    <label class="form-label">Username</label>
                    <input type="text" class="form-input" id="profile-username" 
                           placeholder="Your username" required>
                </div>
                <div class="button-actions">
                    <button type="button" class="btn btn-ghost" onclick="hideEditProfileModal()">
                        Cancel
                    </button>
                    <button type="submit" class="btn btn-primary">
                        Save Changes
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <span id="toast-message"></span>
    </div>

    <script src="/static/script.js"></script>
</body>
</html>